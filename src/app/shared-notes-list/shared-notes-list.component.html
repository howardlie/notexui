<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Shared Notes</ion-title>
  </ion-toolbar>
</ion-header>
<ion-content>
  <ion-grid>
    <ion-row  >
      <ng-container *ngFor="let note of noteService.notes">
      <ion-col size="12" size-sm="6" size-md="4" size-xl="3" *ngIf="(note.status == 1) && (note.account_id == authService.currentUser.id)">
        <ion-card>
          <div class="ion-text-right"><ion-button size="small" fill="clear"  (click)="presentActionSheet(note)">
            <ion-icon name="ellipsis-vertical"></ion-icon>
          </ion-button></div>


          <ion-card-header>
            <ion-card-subtitle><small>{{ ((note.updated_at) ?? note.created_at) | date : 'short' }}</small></ion-card-subtitle>
            <ion-card-title>{{ note.title }}</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <p>
              {{ (note.text.length>40)? (note.text | slice:0:40)+'..':(note.text) }}
            </p>
          </ion-card-content>

          <ion-row>
            <ion-col>
              <ion-button routerDirection="forward" (click)="openNote(note)">
                <ion-icon name="create"></ion-icon>
                <div>Edit</div>
              </ion-button>
            </ion-col>
            <ion-col
              style="display: flex; justify-content: flex-end; align-items: flex-end;"
            >
              <ion-icon *ngIf="note.shared" name="share-social"></ion-icon
              ><ion-icon *ngIf="note.reminder_datetime != null"
                name="notifications"
                style="padding-left: 0.3em"
              ></ion-icon
              ><ion-icon *ngIf="note.patches != null" name="refresh" style="padding-left: 0.3em"></ion-icon>
              <ion-icon *ngIf="note.patches == null" name="checkmark-sharp" style="padding-left: 0.3em"></ion-icon>
            </ion-col>
          </ion-row>
        </ion-card>
      </ion-col>
    </ng-container>
    </ion-row>
  </ion-grid>
</ion-content>
